# register-standalone-server

## PowerShell скрипт регистрации автономного сервера 1С 

### Для работы скрипта требуется установка модуля для работы с yaml и административные права для удаления/создания службы

Скрипт выполняет поиск последней установленной версии технологической платформы, удаляет предыдущий экземпляр сервера (при наличии) и регистрирует новый, может выполнять восстановление базы данных автономного сервера из bak. Поиск платформы выполняется по стандартному пути
```
%ProgramFiles%\1cv8
```

Пример файла конфигурации находится в файле [erp_dev.yml](erp_dev.yml). Файл конфигурации описывает публикацию экземпляра с включенной http отладкой и примером публикации http сервиса из расширения

### Подготовка к использованию:  
Установка модуля для работы с sql server
```powershell
Install-Module SQLServer
```  
Установка модуля для работы с yaml
```powershell
Install-Module powershell-yaml
```  

### Пример вызова:
В первого качестве аргумента скрипт принимает путь к файлу конфигурации экземпляра автономного сервера. В процессе исполнения будет выведен диалог ввода учетных данных, под которыми будет работать служба 

Вторым аргументом, опционально, может быть передан путь к файлу bak, из которого будет восстановлена база данных, используемая в работе автономного сервера. Учетные данные для доступа к серверу баз данных берутся из файла конфигурации экземпляра автономного сервера

```bash
register-standalone-server.ps1 "C:\erp-dev-config.yml"
```
```bash
register-standalone-server.ps1 "C:\erp-dev-config.yml" "C:\erp_dev.bak"
```

